# Data Model: Initial Site

## Entities

### ServerVersion
- **version**: string (semantic version or commit hash, required)
- **buildTimestamp**: string (ISO 8601 timestamp indicating build time, optional)
- **source**: string (identifier of the service that produced the version, default `"api"`)
- **retrievedAt**: string (ISO 8601 timestamp generated at response time, required)
- **displayLabel**: string (human-friendly label derived from `version`, required)

**Validation Rules**
- `version` must be non-empty ASCII and <= 40 characters.
- `buildTimestamp` must parse as RFC 3339 if present.
- `displayLabel` must maintain WCAG contrast when rendered; enforce via design tokens.

### VersionRequestState
- **status**: enum (`"idle" | "loading" | "success" | "error"`)
- **attemptStartedAt**: string (ISO 8601 timestamp set when fetch starts)
- **errorCode**: string (optional machine-readable error)
- **errorMessage**: string (localized error copy surfaced to screen readers)

**State Transitions**
- `idle → loading`: triggered when page mounts and request begins.
- `loading → success`: triggered when response resolves in < 1s.
- `loading → error`: triggered exactly at 1s timeout or when fetch rejects.
- `error → loading`: triggered when user activates retry from error view.

### VersionFetchLogEntry
- **event**: string literal `"VERSION_FETCH_FAILED"`
- **occurredAt**: string (ISO 8601)
- **reason**: string (timeout, network error, bad payload)
- **clientRequestId**: string (UUID generated by frontend per attempt)
- **severity**: enum (`"warning" | "error"`)

**Usage Notes**
- Emitted only when `VersionRequestState.status` becomes `error`.
- Serialized to structured JSON for application logs.

## Relationships
- `VersionRequestState` references `ServerVersion` when status is `"success"`.
- `VersionFetchLogEntry.clientRequestId` correlates to frontend telemetry for debugging.

## Accessibility Constraints
- `displayLabel` must be consumable via screen readers; pair with `aria-live="polite"` region.
- Error messages must provide actionable guidance and retain focus management metadata.

## Performance & Scalability Assumptions
- Single request per page load with optional manual retry; backend expected to handle <100 RPS with sub-250ms latency.
- Timeout fixed at 1 second; repeated failures trigger exponential backoff to avoid log noise (implemented in service layer).

